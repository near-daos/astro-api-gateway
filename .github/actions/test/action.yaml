name: 'Run Tests'
inputs:
  environment:
    description: Environment to run on. Valid choices are dev, testnet
    default: develop
    required: true

runs:
  using: 'docker'
  image: public.ecr.aws/c2q4e2i6/jdk-near-cli:latest
  entrypoint: /github/workspace/test-framework/gradlew
  args:
  - --no-daemon
  - --project-dir=/github/workspace/test-framework
  - prepareCreds
  - test
  - -DincludeTags=all
  - -Dtest.env=$INPUT_ENVIRONMENT
  env:
    NEAR_ACCOUNT_ID: ${{ secrets.NEAR_ACCOUNT_ID }}
    NEAR_PUBLIC_KEY: ${{ secrets.NEAR_PUBLIC_KEY }}
    NEAR_PRIVATE_KEY: ${{ secrets.NEAR_PRIVATE_KEY }}
